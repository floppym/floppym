From 2ff479a347b7163c2d8ea9362c7817560f95ef2e Mon Sep 17 00:00:00 2001
From: Mike Gilbert <floppymaster@gmail.com>
Date: Sun, 2 Jan 2011 15:58:26 -0500
Subject: [PATCH] Change linking rule to respect LDFLAGS and move libs to new var

Needed to properly support ld --asneeded on Gentoo Linux.
---
 Makefile |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/Makefile b/Makefile
index 7f93061..7019ecf 100644
--- a/Makefile
+++ b/Makefile
@@ -5,14 +5,14 @@ DEPS	=	Makefile tools.h types.h
 
 CC	=	gcc
 CFLAGS	=	-g -O2 -Wall -W
-LDFLAGS =	-lz
+LIBS	=	-lz
 
 OBJS	= $(COMMON) $(addsuffix .o, $(TOOLS))
 
 all: $(TOOLS)
 
 $(TOOLS): %: %.o $(COMMON) $(DEPS)
-	$(CC) $(CFLAGS) $(LDFLAGS) -o $@ $< $(COMMON) 
+	$(CC) $(LDFLAGS) -o $@ $< $(COMMON) $(LIBS)
 
 $(OBJS): %.o: %.c $(DEPS)
 	$(CC) $(CFLAGS) -c -o $@ $<
-- 
1.7.2.2

